{"remainingRequest":"/Users/nmadhab/hobby/social-network-frontend/node_modules/babel-loader/lib/index.js!/Users/nmadhab/hobby/social-network-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nmadhab/hobby/social-network-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nmadhab/hobby/social-network-frontend/src/views/ListFriends.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nmadhab/hobby/social-network-frontend/src/views/ListFriends.vue","mtime":1618843800954},{"path":"/Users/nmadhab/hobby/social-network-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nmadhab/hobby/social-network-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/nmadhab/hobby/social-network-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nmadhab/hobby/social-network-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IEFQSV9CQVNFX1VSTCB9IGZyb20gJy9zcmMvY29uZmlnLmpzJzsKaW1wb3J0IGZpcmViYXNlIGZyb20gIi4uL2ZpcmViYXNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMaXN0RnJpZW5kcyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJzOiBbXSwKICAgICAgZW1haWw6ICcnLAogICAgICB1c2VybmFtZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJuYW1lJyksCiAgICAgIHJlZjogZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ2NoYXRyb29tcy8nKQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxpc3RGcmllbmRzOiBmdW5jdGlvbiBsaXN0RnJpZW5kcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgiIi5jb25jYXQoQVBJX0JBU0VfVVJMLCAicHJpdmF0ZS9saXN0RnJpZW5kcyIpLCB7CiAgICAgICAgJ2hlYWRlcnMnOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZFRva2VuJykKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpOwoKICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMudXNlcnMgPSByZXNwLmRhdGE7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoUm9vbTogZnVuY3Rpb24gZmV0Y2hSb29tKGlkLCBmcmllbmROYW1lKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICBheGlvcy5nZXQoIiIuY29uY2F0KEFQSV9CQVNFX1VSTCwgInByaXZhdGUvZ2V0Um9vbU5hbWU/ZnJpZW5kSWQ9IikuY29uY2F0KGlkKSwgewogICAgICAgICdoZWFkZXJzJzogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaWRUb2tlbicpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcC5kYXRhKTsKCiAgICAgICAgX3RoaXMyLnJlZi5vcmRlckJ5Q2hpbGQoJ3Jvb21OYW1lJykuZXF1YWxUbyhyZXNwLmRhdGEpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXBzaG90KSB7CiAgICAgICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1Jvb20gRXhpc3RzJyk7CiAgICAgICAgICAgIHNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRvYy5rZXkpOwoKICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICdDaGF0JywKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICBuaWNrbmFtZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJuYW1lJyksCiAgICAgICAgICAgICAgICAgIHJvb21pZDogZG9jLmtleSwKICAgICAgICAgICAgICAgICAgcm9vbW5hbWU6IHJlc3AuZGF0YSwKICAgICAgICAgICAgICAgICAgZnJpZW5kOiBmcmllbmROYW1lCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGJ1ZyByZWRpcmVjdCBoaW0gdG8gbmV3IHBhZ2Ugd2hlbiByb29tIGNyZWF0ZWQKICAgICAgICAgICAgY29uc29sZS5sb2coIkRvZXMgbm90IEV4aXN0Iik7CgogICAgICAgICAgICB2YXIgbmV3RGF0YSA9IF90aGlzMi5yZWYucHVzaCgpOwoKICAgICAgICAgICAgbmV3RGF0YS5zZXQoewogICAgICAgICAgICAgIHJvb21OYW1lOiByZXNwLmRhdGEKICAgICAgICAgICAgfSk7IC8vIG5lZWQgdG8gcmVkaXJlY3QgdG8gY2hhdCBwYWdlCiAgICAgICAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdDaGF0JywgcGFyYW1zOiB7bmlja25hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpLCByb29taWQ6IGRvYy5rZXksIHJvb21uYW1lOiByZXNwLmRhdGEsIGZyaWVuZDogZnJpZW5kTmFtZX19KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBpZiAoIXRoaXMudXNlcm5hbWUpIHsKICAgICAgY29uc29sZS5sb2coInVlcm5hbWUgbm90IHByZXNudCIpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygidWVybmFtZSBpcyBwcmVzbnQiKTsKICAgICAgdGhpcy5saXN0RnJpZW5kcygpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ListFriends.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <b-container>\n    <b-row>\n      <b-col class=\"pt-5\">\n        <b-list-group class=\"list-group\">\n          <b-list-group-item class=\"d-flex justify-content-around\" v-for=\"item in users\" v-bind:key=\"item.id\">\n            <div class=\"col-4\" v-if=\"item.name === null\">\n              {{item.email}}\n            </div>\n            <div class=\"col-4\" v-else>\n              {{item.name}}\n            </div>\n\n            <div class=\"col-4 text-center\" >\n              <img class=\"img\"  thumbnail v-bind:src=\"item.picture\" alt=\"avatar\">\n            </div>\n            <div class=\"col-4 text-right\">\n              <button class=\"btn btn-primary pull-right\" @click=\"fetchRoom(item.id, item.name || item.email)\">Chat</button>\n            </div>\n          </b-list-group-item>\n        </b-list-group>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport axios from 'axios';\nimport {API_BASE_URL} from '/src/config.js';\nimport firebase from \"../firebase\";\n\nexport default {\n  name: \"ListFriends\",\n  data() {\n    return {\n      users: [],\n      email: '',\n      username: localStorage.getItem('username'),\n      ref: firebase.database().ref('chatrooms/')\n    }\n  },\n  methods: {\n    listFriends(){\n      axios.get(`${API_BASE_URL}private/listFriends`,{'headers' :{\n          'Authorization': 'Bearer '+localStorage.getItem('idToken'),\n        }}).then(resp => {\n        console.log(resp.data);\n        if(resp.status === 200){\n          this.users = resp.data;\n        }\n      }).catch(err => console.log(err))\n    },\n    fetchRoom(id, friendName) {\n      console.log(id);\n      axios.get(`${API_BASE_URL}private/getRoomName?friendId=${id}`, {'headers':{\n          'Authorization': 'Bearer '+localStorage.getItem('idToken'),\n      }}).then(resp => {\n        console.log(resp.data);\n        this.ref.orderByChild('roomName').equalTo(resp.data).once('value', snapshot => {\n          if (snapshot.exists()) {\n            console.log('Room Exists');\n            snapshot.forEach((doc) => {\n              console.log(doc.key);\n              this.$router.push({name: 'Chat', params: {nickname: localStorage.getItem('username'), roomid: doc.key, roomname: resp.data, friend: friendName}});\n              return true;\n            })\n          }\n          else {\n            // bug redirect him to new page when room created\n            console.log(\"Does not Exist\")\n            let newData = this.ref.push()\n            newData.set({\n              roomName: resp.data\n            })\n            // need to redirect to chat page\n            //this.$router.push({name: 'Chat', params: {nickname: localStorage.getItem('username'), roomid: doc.key, roomname: resp.data, friend: friendName}});\n          }\n        })\n      }).catch(err => console.log(err))\n    }\n  },\n  mounted() {\n    if (!this.username) {\n      console.log(\"uername not presnt\");\n      this.$router.push('/login')\n    }\n    else {\n      console.log(\"uername is presnt\");\n      this.listFriends();\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.img{\n  max-width: 70px;\n  max-height: 70px;\n}\n</style>\n"],"sourceRoot":"src/views"}]}